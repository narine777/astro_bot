"""
üöÄ AstroBot: –ü–æ–ª–Ω—ã–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø–æ –∞—Å—Ç—Ä–æ–Ω–æ–º–∏–∏ —Å —Ä–µ—à–µ–Ω–∏—è–º–∏ –∑–∞–¥–∞—á
üéØ –°–æ–ª–Ω–µ—á–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ + –∑–≤–µ–∑–¥—ã –¥–ª—è –æ–ª–∏–º–ø–∏–∞–¥
"""

import os
import logging
from telegram import Update, ReplyKeyboardMarkup, KeyboardButton, InlineKeyboardMarkup, InlineKeyboardButton
from telegram.ext import Application, CommandHandler, ContextTypes, CallbackQueryHandler, MessageHandler, filters

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
logging.basicConfig(
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    level=logging.INFO
)
logger = logging.getLogger(__name__)

TOKEN = os.environ.get('BOT_TOKEN')
if not TOKEN:
    print("‚ùå –û–®–ò–ë–ö–ê: –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è BOT_TOKEN –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞!")
    print("–î–æ–±–∞–≤—å—Ç–µ –µ—ë –≤ Railway ‚Üí Variables")
    exit(1)

# –ë–ê–ó–ê –î–ê–ù–ù–´–• –ù–ï–ë–ï–°–ù–´–• –¢–ï–õ
CELESTIAL_BODIES = {
    "–°–∏—Ä–∏—É—Å": {
        "emoji": "‚≠êÔ∏è",
        "name_en": "Sirius",
        "type": "–î–≤–æ–π–Ω–∞—è –∑–≤–µ–∑–¥–∞ (–°–∏—Ä–∏—É—Å A + –°–∏—Ä–∏—É—Å B)",
        "mass": "2.06 M‚òâ (–°–∏—Ä–∏—É—Å A) + 0.98 M‚òâ (–°–∏—Ä–∏—É—Å B)",
        "radius": "1.71 R‚òâ (–°–∏—Ä–∏—É—Å A), 0.0084 R‚òâ (–°–∏—Ä–∏—É—Å B)",
        "luminosity": "25.4 L‚òâ (–°–∏—Ä–∏—É—Å A), 0.056 L‚òâ (–°–∏—Ä–∏—É—Å B)",
        "distance": "2.64 –ø–∞—Ä—Å–µ–∫–∞ (8.60 —Å–≤–µ—Ç–æ–≤—ã—Ö –ª–µ—Ç)",
        "sources": "SIMBAD, NASA ADS, Gaia DR3",
        "accuracy": "–í—ã—Å–æ–∫–∞—è (¬±1%)",
        "task": "–ó–∞–¥–∞—á–∞: –†–∞—Å—Å—á–∏—Ç–∞–π—Ç–µ –æ–±—â—É—é –º–∞—Å—Å—É —Å–∏—Å—Ç–µ–º—ã –°–∏—Ä–∏—É—Å.",
        "solution": """
üìù **–†–µ—à–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏:**
M–æ–±—â = M_A + M_B
M–æ–±—â = 2.06 M‚òâ + 0.98 M‚òâ = 3.04 M‚òâ

üìê **–ò—Å–ø–æ–ª—å–∑—É–µ–º–∞—è —Ñ–æ—Ä–º—É–ª–∞:**
M–æ–±—â = Œ£M·µ¢ (—Å—É–º–º–∞ –º–∞—Å—Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤)

üéØ **–û—Ç–≤–µ—Ç:** ~3.04 M‚òâ
""",
        "formula": "M–æ–±—â = M_A + M_B"
    },
    "–°–æ–ª–Ω—Ü–µ": {
        "emoji": "‚òÄÔ∏è",
        "name_en": "Sun",
        "type": "–ñ—ë–ª—Ç—ã–π –∫–∞—Ä–ª–∏–∫ (G2V)",
        "mass": "1.9885√ó10¬≥‚Å∞ –∫–≥ (1 M‚òâ)",
        "radius": "695 700 –∫–º (1 R‚òâ)",
        "luminosity": "3.828√ó10¬≤‚Å∂ –í—Ç (1 L‚òâ)",
        "temperature": "5772 K (—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è)",
        "sources": "NASA, SOHO, CODATA",
        "accuracy": "–û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è (¬±0.001%)",
        "task": "–ó–∞–¥–∞—á–∞: –°–∫–æ–ª—å–∫–æ —ç–Ω–µ—Ä–≥–∏–∏ –ø–æ–ª—É—á–∞–µ—Ç –ó–µ–º–ª—è –æ—Ç –°–æ–ª–Ω—Ü–∞?",
        "solution": """
üìù **–†–µ—à–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏:**
1. –°–æ–ª–Ω–µ—á–Ω–∞—è –ø–æ—Å—Ç–æ—è–Ω–Ω–∞—è: S = 1361 –í—Ç/–º¬≤
2. –ü–ª–æ—â–∞–¥—å —Å–µ—á–µ–Ω–∏—è –ó–µ–º–ª–∏: A = œÄR¬≤
   R‚äï = 6.371√ó10‚Å∂ –º
   A = œÄ √ó (6.371√ó10‚Å∂)¬≤ ‚âà 1.275√ó10¬π‚Å¥ –º¬≤
3. –≠–Ω–µ—Ä–≥–∏—è: P = S √ó A
   P = 1361 √ó 1.275√ó10¬π‚Å¥ ‚âà 1.74√ó10¬π‚Å∑ –í—Ç

üìê **–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ–æ—Ä–º—É–ª—ã:**
- –ü–ª–æ—â–∞–¥—å –∫—Ä—É–≥–∞: A = œÄR¬≤
- –ú–æ—â–Ω–æ—Å—Ç—å: P = S √ó A

üéØ **–û—Ç–≤–µ—Ç:** ~1.74√ó10¬π‚Å∑ –í—Ç
""",
        "formula": "P = S √ó œÄR¬≤, –≥–¥–µ S = 1361 –í—Ç/–º¬≤"
    },
    "–ú–µ—Ä–∫—É—Ä–∏–π": {
        "emoji": "‚òø",
        "name_en": "Mercury",
        "type": "–ü–ª–∞–Ω–µ—Ç–∞ –∑–µ–º–Ω–æ–π –≥—Ä—É–ø–ø—ã",
        "mass": "3.3011√ó10¬≤¬≥ –∫–≥ (0.0553 M‚äï)",
        "radius": "2439.7 –∫–º",
        "distance": "0.3871 –∞.–µ. –æ—Ç –°–æ–ª–Ω—Ü–∞",
        "period": "88 –∑–µ–º–Ω—ã—Ö —Å—É—Ç–æ–∫",
        "sources": "NASA Fact Sheet, MESSENGER mission",
        "accuracy": "–í—ã—Å–æ–∫–∞—è (¬±0.01%)",
        "task": "–ó–∞–¥–∞—á–∞: –£—Å–∫–æ—Ä–µ–Ω–∏–µ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –ø–∞–¥–µ–Ω–∏—è –Ω–∞ –ú–µ—Ä–∫—É—Ä–∏–∏?",
        "solution": """
üìù **–†–µ—à–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏:**
1. –§–æ—Ä–º—É–ª–∞: g = GM/R¬≤
2. –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã:
   G = 6.67430√ó10‚Åª¬π¬π –º¬≥/(–∫–≥¬∑—Å¬≤)
   M = 3.3011√ó10¬≤¬≥ –∫–≥
   R = 2.4397√ó10‚Å∂ –º
3. –†–∞—Å—á–µ—Ç:
   g = (6.67430√ó10‚Åª¬π¬π √ó 3.3011√ó10¬≤¬≥) / (2.4397√ó10‚Å∂)¬≤
   g ‚âà 3.70 –º/—Å¬≤

üìê **–ò—Å–ø–æ–ª—å–∑—É–µ–º–∞—è —Ñ–æ—Ä–º—É–ª–∞:**
g = GM/R¬≤

üéØ **–û—Ç–≤–µ—Ç:** ~3.70 –º/—Å¬≤
""",
        "formula": "g = GM/R¬≤"
    },
    "–í–µ–Ω–µ—Ä–∞": {
        "emoji": "‚ôÄ",
        "name_en": "Venus",
        "type": "–ü–ª–∞–Ω–µ—Ç–∞ –∑–µ–º–Ω–æ–π –≥—Ä—É–ø–ø—ã",
        "mass": "4.8675√ó10¬≤‚Å¥ –∫–≥ (0.815 M‚äï)",
        "radius": "6051.8 –∫–º",
        "distance": "0.7233 –∞.–µ. –æ—Ç –°–æ–ª–Ω—Ü–∞",
        "period": "224.7 –∑–µ–º–Ω—ã—Ö —Å—É—Ç–æ–∫",
        "sources": "NASA, Venus Express",
        "accuracy": "–û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è (¬±0.001%)",
        "task": "–ó–∞–¥–∞—á–∞: –í—Ç–æ—Ä–∞—è –∫–æ—Å–º–∏—á–µ—Å–∫–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –¥–ª—è –í–µ–Ω–µ—Ä—ã?",
        "solution": """
üìù **–†–µ—à–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏:**
1. –§–æ—Ä–º—É–ª–∞: v‚ÇÇ = ‚àö(2GM/R)
2. –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã:
   G = 6.67430√ó10‚Åª¬π¬π –º¬≥/(–∫–≥¬∑—Å¬≤)
   M = 4.8675√ó10¬≤‚Å¥ –∫–≥
   R = 6.0518√ó10‚Å∂ –º
3. –†–∞—Å—á–µ—Ç:
   v‚ÇÇ = ‚àö(2 √ó 6.67430√ó10‚Åª¬π¬π √ó 4.8675√ó10¬≤‚Å¥ / 6.0518√ó10‚Å∂)
   v‚ÇÇ ‚âà ‚àö(6.494√ó10‚Å∑) ‚âà 1.036√ó10‚Å¥ –º/—Å

üìê **–ò—Å–ø–æ–ª—å–∑—É–µ–º–∞—è —Ñ–æ—Ä–º—É–ª–∞:**
v‚ÇÇ = ‚àö(2GM/R)

üéØ **–û—Ç–≤–µ—Ç:** ~10.36 –∫–º/—Å
""",
        "formula": "v‚ÇÇ = ‚àö(2GM/R)"
    },
    "–ó–µ–º–ª—è": {
        "emoji": "üåç",
        "name_en": "Earth",
        "type": "–ü–ª–∞–Ω–µ—Ç–∞ –∑–µ–º–Ω–æ–π –≥—Ä—É–ø–ø—ã",
        "mass": "5.9722√ó10¬≤‚Å¥ –∫–≥ (1 M‚äï)",
        "radius": "6371.0 –∫–º (—Å—Ä–µ–¥–Ω–∏–π)",
        "distance": "1.000001018 –∞.–µ. –æ—Ç –°–æ–ª–Ω—Ü–∞",
        "period": "365.256 —Å—É—Ç–æ–∫",
        "sources": "NASA/GSFC, CODATA 2018",
        "accuracy": "–û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è (¬±0.0001%)",
        "task": "–ó–∞–¥–∞—á–∞: –õ–∏–Ω–µ–π–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å —Ç–æ—á–∫–∏ –Ω–∞ —ç–∫–≤–∞—Ç–æ—Ä–µ?",
        "solution": """
üìù **–†–µ—à–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏:**
1. –§–æ—Ä–º—É–ª–∞: v = 2œÄR/T
2. –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã:
   R = 6.371√ó10‚Å∂ –º
   T = 24 —á–∞—Å–∞ = 86400 —Å–µ–∫—É–Ω–¥
3. –†–∞—Å—á–µ—Ç:
   v = (2 √ó œÄ √ó 6.371√ó10‚Å∂) / 86400
   v ‚âà (4.000√ó10‚Å∑) / 86400 ‚âà 463 –º/—Å

üìê **–ò—Å–ø–æ–ª—å–∑—É–µ–º–∞—è —Ñ–æ—Ä–º—É–ª–∞:**
v = 2œÄR/T (—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –ø–æ –æ–∫—Ä—É–∂–Ω–æ—Å—Ç–∏)

üéØ **–û—Ç–≤–µ—Ç:** ~463 –º/—Å
""",
        "formula": "v = 2œÄR/T"
    },
    "–ú–∞—Ä—Å": {
        "emoji": "‚ôÇ",
        "name_en": "Mars",
        "type": "–ü–ª–∞–Ω–µ—Ç–∞ –∑–µ–º–Ω–æ–π –≥—Ä—É–ø–ø—ã",
        "mass": "6.4171√ó10¬≤¬≥ –∫–≥ (0.107 M‚äï)",
        "radius": "3389.5 –∫–º",
        "distance": "1.5237 –∞.–µ. –æ—Ç –°–æ–ª–Ω—Ü–∞",
        "period": "687 –∑–µ–º–Ω—ã—Ö —Å—É—Ç–æ–∫",
        "sources": "NASA, Mars Reconnaissance Orbiter",
        "accuracy": "–í—ã—Å–æ–∫–∞—è (¬±0.01%)",
        "task": "–ó–∞–¥–∞—á–∞: –°–∏–ª–∞ —Ç—è–∂–µ—Å—Ç–∏ –Ω–∞ –ú–∞—Ä—Å–µ?",
        "solution": """
üìù **–†–µ—à–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏:**
1. –§–æ—Ä–º—É–ª–∞: g = GM/R¬≤
2. –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã:
   G = 6.67430√ó10‚Åª¬π¬π –º¬≥/(–∫–≥¬∑—Å¬≤)
   M = 6.4171√ó10¬≤¬≥ –∫–≥
   R = 3.3895√ó10‚Å∂ –º
3. –†–∞—Å—á–µ—Ç:
   g = (6.67430√ó10‚Åª¬π¬π √ó 6.4171√ó10¬≤¬≥) / (3.3895√ó10‚Å∂)¬≤
   g ‚âà 3.71 –º/—Å¬≤

üìê **–ò—Å–ø–æ–ª—å–∑—É–µ–º–∞—è —Ñ–æ—Ä–º—É–ª–∞:**
g = GM/R¬≤

üéØ **–û—Ç–≤–µ—Ç:** ~3.71 –º/—Å¬≤ (38% –∑–µ–º–Ω–æ–π)
""",
        "formula": "g = GM/R¬≤"
    },
    "–Æ–ø–∏—Ç–µ—Ä": {
        "emoji": "‚ôÉ",
        "name_en": "Jupiter",
        "type": "–ì–∞–∑–æ–≤—ã–π –≥–∏–≥–∞–Ω—Ç",
        "mass": "1.8982√ó10¬≤‚Å∑ –∫–≥ (317.8 M‚äï)",
        "radius": "69 911 –∫–º (—ç–∫–≤–∞—Ç–æ—Ä–∏–∞–ª—å–Ω—ã–π)",
        "distance": "5.2034 –∞.–µ. –æ—Ç –°–æ–ª–Ω—Ü–∞",
        "period": "11.86 –∑–µ–º–Ω—ã—Ö –ª–µ—Ç",
        "sources": "NASA, Juno mission",
        "accuracy": "–í—ã—Å–æ–∫–∞—è (¬±0.01%)",
        "task": "–ó–∞–¥–∞—á–∞: –í–æ —Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –Æ–ø–∏—Ç–µ—Ä –º–∞—Å—Å–∏–≤–Ω–µ–µ –ó–µ–º–ª–∏?",
        "solution": """
üìù **–†–µ—à–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏:**
1. –î–∞–Ω–Ω—ã–µ:
   M_–Æ–ø–∏—Ç–µ—Ä = 1.8982√ó10¬≤‚Å∑ –∫–≥
   M_–ó–µ–º–ª—è = 5.9722√ó10¬≤‚Å¥ –∫–≥
2. –†–∞—Å—á–µ—Ç –æ—Ç–Ω–æ—à–µ–Ω–∏—è:
   N = M_–Æ–ø–∏—Ç–µ—Ä / M_–ó–µ–º–ª—è
   N = 1.8982√ó10¬≤‚Å∑ / 5.9722√ó10¬≤‚Å¥
   N ‚âà 317.8

üìê **–ò—Å–ø–æ–ª—å–∑—É–µ–º–∞—è —Ñ–æ—Ä–º—É–ª–∞:**
N = M‚ÇÅ/M‚ÇÇ

üéØ **–û—Ç–≤–µ—Ç:** ~318 —Ä–∞–∑
""",
        "formula": "N = M‚ÇÅ/M‚ÇÇ"
    },
    "–°–∞—Ç—É—Ä–Ω": {
        "emoji": "‚ôÑ",
        "name_en": "Saturn",
        "type": "–ì–∞–∑–æ–≤—ã–π –≥–∏–≥–∞–Ω—Ç",
        "mass": "5.6834√ó10¬≤‚Å∂ –∫–≥ (95.16 M‚äï)",
        "radius": "58 232 –∫–º (—ç–∫–≤–∞—Ç–æ—Ä–∏–∞–ª—å–Ω—ã–π)",
        "distance": "9.5826 –∞.–µ. –æ—Ç –°–æ–ª–Ω—Ü–∞",
        "period": "29.46 –∑–µ–º–Ω—ã—Ö –ª–µ—Ç",
        "sources": "NASA, Cassini mission",
        "accuracy": "–í—ã—Å–æ–∫–∞—è (¬±0.02%)",
        "task": "–ó–∞–¥–∞—á–∞: –°—Ä–µ–¥–Ω—è—è –ø–ª–æ—Ç–Ω–æ—Å—Ç—å –°–∞—Ç—É—Ä–Ω–∞?",
        "solution": """
üìù **–†–µ—à–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏:**
1. –§–æ—Ä–º—É–ª–∞: œÅ = M/V = 3M/(4œÄR¬≥)
2. –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã:
   M = 5.6834√ó10¬≤‚Å∂ –∫–≥
   R = 5.8232√ó10‚Å∑ –º
3. –†–∞—Å—á–µ—Ç:
   V = (4/3)œÄR¬≥ = (4/3)œÄ √ó (5.8232√ó10‚Å∑)¬≥ ‚âà 8.271√ó10¬≤¬≥ –º¬≥
   œÅ = 5.6834√ó10¬≤‚Å∂ / 8.271√ó10¬≤¬≥ ‚âà 687 –∫–≥/–º¬≥

üìê **–ò—Å–ø–æ–ª—å–∑—É–µ–º–∞—è —Ñ–æ—Ä–º—É–ª–∞:**
œÅ = 3M/(4œÄR¬≥)

üéØ **–û—Ç–≤–µ—Ç:** ~0.687 –≥/—Å–º¬≥
""",
        "formula": "œÅ = 3M/(4œÄR¬≥)"
    },
    "–£—Ä–∞–Ω": {
        "emoji": "‚ôÖ",
        "name_en": "Uranus",
        "type": "–õ–µ–¥—è–Ω–æ–π –≥–∏–≥–∞–Ω—Ç",
        "mass": "8.6810√ó10¬≤‚Åµ –∫–≥ (14.54 M‚äï)",
        "radius": "25 362 –∫–º",
        "distance": "19.201 –∞.–µ. –æ—Ç –°–æ–ª–Ω—Ü–∞",
        "period": "84.01 –∑–µ–º–Ω—ã—Ö –ª–µ—Ç",
        "sources": "NASA, Voyager 2",
        "accuracy": "–°—Ä–µ–¥–Ω—è—è (¬±0.1%)",
        "task": "–ó–∞–¥–∞—á–∞: –°—Ä–∞–≤–Ω–∏—Ç–µ –º–∞—Å—Å—É –£—Ä–∞–Ω–∞ –∏ –ù–µ–ø—Ç—É–Ω–∞",
        "solution": """
üìù **–†–µ—à–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏:**
1. –î–∞–Ω–Ω—ã–µ:
   M_–£—Ä–∞–Ω = 8.6810√ó10¬≤‚Åµ –∫–≥
   M_–ù–µ–ø—Ç—É–Ω = 1.0241√ó10¬≤‚Å∂ –∫–≥
2. –†–∞—Å—á–µ—Ç –æ—Ç–Ω–æ—à–µ–Ω–∏—è:
   N = M_–£—Ä–∞–Ω / M_–ù–µ–ø—Ç—É–Ω
   N = 8.6810√ó10¬≤‚Åµ / 1.0241√ó10¬≤‚Å∂ ‚âà 0.848
3. –í—ã–≤–æ–¥:
   –£—Ä–∞–Ω –ª–µ–≥—á–µ –ù–µ–ø—Ç—É–Ω–∞ –ø—Ä–∏–º–µ—Ä–Ω–æ –Ω–∞ 15%

üìê **–ò—Å–ø–æ–ª—å–∑—É–µ–º–∞—è —Ñ–æ—Ä–º—É–ª–∞:**
N = M‚ÇÅ/M‚ÇÇ

üéØ **–û—Ç–≤–µ—Ç:** –£—Ä–∞–Ω –ª–µ–≥—á–µ (~14.5 M‚äï vs ~17.1 M‚äï)
""",
        "formula": "N = M‚ÇÅ/M‚ÇÇ"
    },
    "–ù–µ–ø—Ç—É–Ω": {
        "emoji": "‚ôÜ",
        "name_en": "Neptune",
        "type": "–õ–µ–¥—è–Ω–æ–π –≥–∏–≥–∞–Ω—Ç",
        "mass": "1.0241√ó10¬≤‚Å∂ –∫–≥ (17.15 M‚äï)",
        "radius": "24 622 –∫–º",
        "distance": "30.07 –∞.–µ. –æ—Ç –°–æ–ª–Ω—Ü–∞",
        "period": "164.8 –∑–µ–º–Ω—ã—Ö –ª–µ—Ç",
        "sources": "NASA, Voyager 2",
        "accuracy": "–°—Ä–µ–¥–Ω—è—è (¬±0.1%)",
        "task": "–ó–∞–¥–∞—á–∞: –ö–∞–∫–∞—è –ø–ª–∞–Ω–µ—Ç–∞ –¥–∞–ª—å—à–µ - –£—Ä–∞–Ω –∏–ª–∏ –ù–µ–ø—Ç—É–Ω?",
        "solution": """
üìù **–†–µ—à–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏:**
1. –î–∞–Ω–Ω—ã–µ:
   a_–£—Ä–∞–Ω = 19.201 –∞.–µ.
   a_–ù–µ–ø—Ç—É–Ω = 30.07 –∞.–µ.
2. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ:
   30.07 –∞.–µ. > 19.201 –∞.–µ.
   –†–∞–∑–Ω–∏—Ü–∞: 30.07 - 19.201 = 10.869 –∞.–µ.
3. –í—ã–≤–æ–¥:
   –ù–µ–ø—Ç—É–Ω –¥–∞–ª—å—à–µ –æ—Ç –°–æ–ª–Ω—Ü–∞, —á–µ–º –£—Ä–∞–Ω

üìê **–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ:**
–ë–æ–ª—å—à–∞—è –ø–æ–ª—É–æ—Å—å –æ—Ä–±–∏—Ç—ã (a)

üéØ **–û—Ç–≤–µ—Ç:** –ù–µ–ø—Ç—É–Ω (30.07 –∞.–µ. > 19.20 –∞.–µ.)
""",
        "formula": "–°—Ä–∞–≤–Ω–µ–Ω–∏–µ: a_–ù–µ–ø—Ç—É–Ω > a_–£—Ä–∞–Ω"
    }
}


# ==================== –ö–õ–ê–í–ò–ê–¢–£–†–´ ====================

def get_main_keyboard():
    """–û—Å–Ω–æ–≤–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞"""
    keyboard = [
        [KeyboardButton("ü™ê 8 –ü–ª–∞–Ω–µ—Ç"), KeyboardButton("‚≠êÔ∏è –°–∏—Ä–∏—É—Å"), KeyboardButton("‚òÄÔ∏è –°–æ–ª–Ω—Ü–µ")],
        [KeyboardButton("üìä –°—Ä–∞–≤–Ω–∏—Ç—å"), KeyboardButton("üìù –ó–∞–¥–∞—á–∏"), KeyboardButton("üî¨ –ú–µ—Ç–æ–¥—ã")],
        [KeyboardButton("‚ùì –ü–æ–º–æ—â—å")]
    ]
    return ReplyKeyboardMarkup(keyboard, resize_keyboard=True, one_time_keyboard=False)


def get_planets_keyboard():
    """–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å 8 –ø–ª–∞–Ω–µ—Ç–∞–º–∏ (–±–µ–∑ –°–∏—Ä–∏—É—Å–∞ –∏ –°–æ–ª–Ω—Ü–∞)"""
    keyboard = [
        [InlineKeyboardButton("‚òø –ú–µ—Ä–∫—É—Ä–∏–π", callback_data="body_–ú–µ—Ä–∫—É—Ä–∏–π"),
         InlineKeyboardButton("‚ôÄ –í–µ–Ω–µ—Ä–∞", callback_data="body_–í–µ–Ω–µ—Ä–∞")],
        [InlineKeyboardButton("üåç –ó–µ–º–ª—è", callback_data="body_–ó–µ–º–ª—è"),
         InlineKeyboardButton("‚ôÇ –ú–∞—Ä—Å", callback_data="body_–ú–∞—Ä—Å")],
        [InlineKeyboardButton("‚ôÉ –Æ–ø–∏—Ç–µ—Ä", callback_data="body_–Æ–ø–∏—Ç–µ—Ä"),
         InlineKeyboardButton("‚ôÑ –°–∞—Ç—É—Ä–Ω", callback_data="body_–°–∞—Ç—É—Ä–Ω")],
        [InlineKeyboardButton("‚ôÖ –£—Ä–∞–Ω", callback_data="body_–£—Ä–∞–Ω"),
         InlineKeyboardButton("‚ôÜ –ù–µ–ø—Ç—É–Ω", callback_data="body_–ù–µ–ø—Ç—É–Ω")],
        [InlineKeyboardButton("üîô –ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é", callback_data="back_main")]
    ]
    return InlineKeyboardMarkup(keyboard)


def get_compare_keyboard():
    """–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è"""
    keyboard = [
        [InlineKeyboardButton("–ó–µ–º–ª—è vs –ú–∞—Ä—Å", callback_data="compare_–ó–µ–º–ª—è_–ú–∞—Ä—Å"),
         InlineKeyboardButton("–í–µ–Ω–µ—Ä–∞ vs –ó–µ–º–ª—è", callback_data="compare_–í–µ–Ω–µ—Ä–∞_–ó–µ–º–ª—è")],
        [InlineKeyboardButton("–Æ–ø–∏—Ç–µ—Ä vs –°–∞—Ç—É—Ä–Ω", callback_data="compare_–Æ–ø–∏—Ç–µ—Ä_–°–∞—Ç—É—Ä–Ω"),
         InlineKeyboardButton("–°–æ–ª–Ω—Ü–µ vs –°–∏—Ä–∏—É—Å", callback_data="compare_–°–æ–ª–Ω—Ü–µ_–°–∏—Ä–∏—É—Å")],
        [InlineKeyboardButton("üîô –ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é", callback_data="back_main")]
    ]
    return InlineKeyboardMarkup(keyboard)


def get_tasks_keyboard():
    """–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å –∑–∞–¥–∞—á–∞–º–∏"""
    keyboard = [
        [InlineKeyboardButton("üìê –ö–æ—Å–º–∏—á–µ—Å–∫–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏", callback_data="task_velocity"),
         InlineKeyboardButton("‚öñÔ∏è –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–∞—Å—Å", callback_data="task_mass")],
        [InlineKeyboardButton("üåç –°–∏–ª–∞ —Ç—è–∂–µ—Å—Ç–∏", callback_data="task_gravity"),
         InlineKeyboardButton("üîÑ –ü–µ—Ä–∏–æ–¥—ã", callback_data="task_period")],
        [InlineKeyboardButton("‚≠êÔ∏è –ó–≤–µ–∑–¥–Ω—ã–µ –∑–∞–¥–∞—á–∏", callback_data="task_stars"),
         InlineKeyboardButton("üìè –ü–ª–æ—Ç–Ω–æ—Å—Ç—å", callback_data="task_density")],
        [InlineKeyboardButton("üîô –ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é", callback_data="back_main")]
    ]
    return InlineKeyboardMarkup(keyboard)


# ==================== –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò –°–û–û–ë–©–ï–ù–ò–ô ====================

async def start_command(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ /start"""
    welcome = f"""
üöÄ *–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ AstroBot!*
*–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –¥–ª—è –æ–ª–∏–º–ø–∏–∞–¥–Ω–æ–π –∞—Å—Ç—Ä–æ–Ω–æ–º–∏–∏*

*–î–æ—Å—Ç—É–ø–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã:*
‚Ä¢ ‚òÄÔ∏è **–°–æ–ª–Ω—Ü–µ** - –Ω–∞—à–∞ –∑–≤–µ–∑–¥–∞
‚Ä¢ ü™ê **8 –ü–ª–∞–Ω–µ—Ç** - –æ—Ç –ú–µ—Ä–∫—É—Ä–∏—è –¥–æ –ù–µ–ø—Ç—É–Ω–∞
‚Ä¢ ‚≠êÔ∏è **–°–∏—Ä–∏—É—Å** - —Å–∞–º–∞—è —è—Ä–∫–∞—è –∑–≤–µ–∑–¥–∞

*–§—É–Ω–∫—Ü–∏–∏:*
üìä **–°—Ä–∞–≤–Ω–∏—Ç—å** - —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–≤—É—Ö –æ–±—ä–µ–∫—Ç–æ–≤
üìù **–ó–∞–¥–∞—á–∏** - –æ–ª–∏–º–ø–∏–∞–¥–Ω—ã–µ –∑–∞–¥–∞—á–∏ —Å —Ä–µ—à–µ–Ω–∏—è–º–∏
üî¨ **–ú–µ—Ç–æ–¥—ã** - –º–µ—Ç–æ–¥–∏–∫–∏ –∏–∑–º–µ—Ä–µ–Ω–∏–π
‚ùì **–ü–æ–º–æ—â—å** - —Å–ø—Ä–∞–≤–∫–∞ –ø–æ –±–æ—Ç—É

*–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ –¥–ª—è –Ω–∞—á–∞–ª–∞:*
"""
    await update.message.reply_text(welcome, parse_mode='Markdown', reply_markup=get_main_keyboard())


async def handle_message(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π"""
    text = update.message.text

    if text == "ü™ê 8 –ü–ª–∞–Ω–µ—Ç":
        await update.message.reply_text(
            "üåå *–í—ã–±–µ—Ä–∏—Ç–µ –ø–ª–∞–Ω–µ—Ç—É:*\n(8 –ø–ª–∞–Ω–µ—Ç –°–æ–ª–Ω–µ—á–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã)",
            parse_mode='Markdown',
            reply_markup=get_planets_keyboard()
        )

    elif text == "‚≠êÔ∏è –°–∏—Ä–∏—É—Å":
        await show_celestial_body_direct(update, "–°–∏—Ä–∏—É—Å")

    elif text == "‚òÄÔ∏è –°–æ–ª–Ω—Ü–µ":
        await show_celestial_body_direct(update, "–°–æ–ª–Ω—Ü–µ")

    elif text == "üìä –°—Ä–∞–≤–Ω–∏—Ç—å":
        await update.message.reply_text(
            "‚öñÔ∏è *–í—ã–±–µ—Ä–∏—Ç–µ –ø–∞—Ä—É –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è:*",
            parse_mode='Markdown',
            reply_markup=get_compare_keyboard()
        )

    elif text == "üìù –ó–∞–¥–∞—á–∏":
        await update.message.reply_text(
            "üìö *–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –∑–∞–¥–∞—á–∏:*\n\n"
            "üìê *–ö–æ—Å–º–∏—á–µ—Å–∫–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏* - –ø–µ—Ä–≤–∞—è –∏ –≤—Ç–æ—Ä–∞—è –∫–æ—Å–º–∏—á–µ—Å–∫–∏–µ\n"
            "‚öñÔ∏è *–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–∞—Å—Å* - –æ—Ç–Ω–æ—à–µ–Ω–∏—è –º–∞—Å—Å –æ–±—ä–µ–∫—Ç–æ–≤\n"
            "üåç *–°–∏–ª–∞ —Ç—è–∂–µ—Å—Ç–∏* - —É—Å–∫–æ—Ä–µ–Ω–∏–µ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –ø–∞–¥–µ–Ω–∏—è\n"
            "üîÑ *–ü–µ—Ä–∏–æ–¥—ã* - –æ—Ä–±–∏—Ç–∞–ª—å–Ω—ã–µ –∏ —Å–∏–Ω–æ–¥–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–∏–æ–¥—ã\n"
            "‚≠êÔ∏è *–ó–≤–µ–∑–¥–Ω—ã–µ –∑–∞–¥–∞—á–∏* - —Å–≤–µ—Ç–∏–º–æ—Å—Ç—å, –º–∞—Å—Å–∞ –∑–≤–µ–∑–¥\n"
            "üìè *–ü–ª–æ—Ç–Ω–æ—Å—Ç—å* - —Å—Ä–µ–¥–Ω—è—è –ø–ª–æ—Ç–Ω–æ—Å—Ç—å –ø–ª–∞–Ω–µ—Ç",
            parse_mode='Markdown',
            reply_markup=get_tasks_keyboard()
        )

    elif text == "üî¨ –ú–µ—Ç–æ–¥—ã":
        await show_methods(update)

    elif text == "‚ùì –ü–æ–º–æ—â—å":
        await show_help(update)

    else:
        await update.message.reply_text(
            "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫–∏ –º–µ–Ω—é ‚¨áÔ∏è",
            reply_markup=get_main_keyboard()
        )


async def show_celestial_body_direct(update: Update, body_name: str):
    """–ù–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω–µ–±–µ—Å–Ω–æ–º —Ç–µ–ª–µ"""
    if body_name not in CELESTIAL_BODIES:
        await update.message.reply_text(
            f"‚ùå –û–±—ä–µ–∫—Ç '{body_name}' –Ω–µ –Ω–∞–π–¥–µ–Ω.",
            reply_markup=get_main_keyboard()
        )
        return

    body = CELESTIAL_BODIES[body_name]

    response = f"{body['emoji']} *{body_name.upper()}* ({body['name_en']})\n\n"
    response += f"üìå *–¢–∏–ø:* {body['type']}\n\n"

    response += f"‚öñÔ∏è *–ú–∞—Å—Å–∞:* {body['mass']}\n"
    response += f"üìè *–†–∞–¥–∏—É—Å:* {body['radius']}\n"

    if 'distance' in body:
        response += f"üìç *–†–∞—Å—Å—Ç–æ—è–Ω–∏–µ:* {body['distance']}\n"

    if 'period' in body:
        response += f"üîÑ *–ü–µ—Ä–∏–æ–¥ –æ–±—Ä–∞—â–µ–Ω–∏—è:* {body['period']}\n"

    if 'luminosity' in body:
        response += f"‚òÄÔ∏è *–°–≤–µ—Ç–∏–º–æ—Å—Ç—å:* {body['luminosity']}\n"

    if 'temperature' in body:
        response += f"üå°Ô∏è *–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞:* {body['temperature']}\n"

    response += f"\nüìä *–¢–æ—á–Ω–æ—Å—Ç—å:* {body['accuracy']}\n"
    response += f"üìö *–ò—Å—Ç–æ—á–Ω–∏–∫–∏:* {body['sources']}\n\n"
    response += f"üéØ *{body['task']}*\n\n"
    response += body['solution']
    response += "\n_–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –æ–ª–∏–º–ø–∏–∞–¥–Ω—ã—Ö –∑–∞–¥–∞—á!_"

    await update.message.reply_text(response, parse_mode='Markdown', reply_markup=get_main_keyboard())


async def button_callback(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞–∂–∞—Ç–∏–π –Ω–∞ –∏–Ω–ª–∞–π–Ω-–∫–Ω–æ–ø–∫–∏"""
    query = update.callback_query
    await query.answer()

    data = query.data

    if data.startswith("body_"):
        body_name = data.split("_")[1]
        await show_celestial_body_inline(query, body_name)

    elif data.startswith("compare_"):
        bodies = data.split("_")[1:]
        if len(bodies) == 2:
            await show_comparison(query, bodies[0], bodies[1])

    elif data.startswith("task_"):
        task_type = data.split("_")[1]
        await show_task_with_solution(query, task_type)

    elif data == "back_main":
        await query.edit_message_text(
            "üè† *–í–æ–∑–≤—Ä–∞—Ç –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é*\n–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ –∏–∑ –∫–Ω–æ–ø–æ–∫ –Ω–∏–∂–µ:",
            parse_mode='Markdown'
        )
        await query.edit_message_reply_markup(None)

        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –æ—Å–Ω–æ–≤–Ω—É—é –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É
        await query.message.reply_text(
            "–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é:",
            reply_markup=get_main_keyboard()
        )

    elif data == "back_planets":
        # –ö–ù–û–ü–ö–ê "–ù–ê–ó–ê–î –ö –ü–õ–ê–ù–ï–¢–ê–ú" - –í–û–ó–í–†–ê–©–ê–ï–ú –ö –í–´–ë–û–†–£ –ü–õ–ê–ù–ï–¢
        await query.edit_message_text(
            "üåå *–í—ã–±–µ—Ä–∏—Ç–µ –ø–ª–∞–Ω–µ—Ç—É:*\n(8 –ø–ª–∞–Ω–µ—Ç –°–æ–ª–Ω–µ—á–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã)",
            parse_mode='Markdown',
            reply_markup=get_planets_keyboard()
        )

    elif data == "back_compare":
        # –í–æ–∑–≤—Ä–∞—Ç –∫ –≤—ã–±–æ—Ä—É —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
        await query.edit_message_text(
            "‚öñÔ∏è *–í—ã–±–µ—Ä–∏—Ç–µ –ø–∞—Ä—É –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è:*",
            parse_mode='Markdown',
            reply_markup=get_compare_keyboard()
        )

    elif data == "back_tasks":
        # –í–æ–∑–≤—Ä–∞—Ç –∫ –≤—ã–±–æ—Ä—É –∑–∞–¥–∞—á
        await query.edit_message_text(
            "üìö *–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –∑–∞–¥–∞—á–∏:*\n\n"
            "üìê *–ö–æ—Å–º–∏—á–µ—Å–∫–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏* - –ø–µ—Ä–≤–∞—è –∏ –≤—Ç–æ—Ä–∞—è –∫–æ—Å–º–∏—á–µ—Å–∫–∏–µ\n"
            "‚öñÔ∏è *–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–∞—Å—Å* - –æ—Ç–Ω–æ—à–µ–Ω–∏—è –º–∞—Å—Å –æ–±—ä–µ–∫—Ç–æ–≤\n"
            "üåç *–°–∏–ª–∞ —Ç—è–∂–µ—Å—Ç–∏* - —É—Å–∫–æ—Ä–µ–Ω–∏–µ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –ø–∞–¥–µ–Ω–∏—è\n"
            "üîÑ *–ü–µ—Ä–∏–æ–¥—ã* - –æ—Ä–±–∏—Ç–∞–ª—å–Ω—ã–µ –∏ —Å–∏–Ω–æ–¥–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–∏–æ–¥—ã\n"
            "‚≠êÔ∏è *–ó–≤–µ–∑–¥–Ω—ã–µ –∑–∞–¥–∞—á–∏* - —Å–≤–µ—Ç–∏–º–æ—Å—Ç—å, –º–∞—Å—Å–∞ –∑–≤–µ–∑–¥\n"
            "üìè *–ü–ª–æ—Ç–Ω–æ—Å—Ç—å* - —Å—Ä–µ–¥–Ω—è—è –ø–ª–æ—Ç–Ω–æ—Å—Ç—å –ø–ª–∞–Ω–µ—Ç",
            parse_mode='Markdown',
            reply_markup=get_tasks_keyboard()
        )


async def show_celestial_body_inline(query, body_name: str):
    """–ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é —á–µ—Ä–µ–∑ –∏–Ω–ª–∞–π–Ω-–∫–Ω–æ–ø–∫—É"""
    if body_name not in CELESTIAL_BODIES:
        await query.edit_message_text(
            f"‚ùå –û–±—ä–µ–∫—Ç '{body_name}' –Ω–µ –Ω–∞–π–¥–µ–Ω.",
            parse_mode='Markdown'
        )
        return

    body = CELESTIAL_BODIES[body_name]

    response = f"{body['emoji']} *{body_name.upper()}* ({body['name_en']})\n\n"
    response += f"üìå *–¢–∏–ø:* {body['type']}\n\n"
    response += f"‚öñÔ∏è *–ú–∞—Å—Å–∞:* {body['mass']}\n"
    response += f"üìè *–†–∞–¥–∏—É—Å:* {body['radius']}\n"

    if 'distance' in body:
        response += f"üìç *–†–∞—Å—Å—Ç–æ—è–Ω–∏–µ:* {body['distance']}\n"

    if 'period' in body:
        response += f"üîÑ *–ü–µ—Ä–∏–æ–¥ –æ–±—Ä–∞—â–µ–Ω–∏—è:* {body['period']}\n"

    if 'luminosity' in body:
        response += f"‚òÄÔ∏è *–°–≤–µ—Ç–∏–º–æ—Å—Ç—å:* {body['luminosity']}\n"

    if 'temperature' in body:
        response += f"üå°Ô∏è *–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞:* {body['temperature']}\n"

    response += f"\nüìä *–¢–æ—á–Ω–æ—Å—Ç—å:* {body['accuracy']}\n"
    response += f"üìö *–ò—Å—Ç–æ—á–Ω–∏–∫–∏:* {body['sources']}\n\n"
    response += f"üéØ *{body['task']}*\n\n"
    response += body['solution']

    # –ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥ –∫ –ø–ª–∞–Ω–µ—Ç–∞–º" - —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–ª–∞–Ω–µ—Ç, –Ω–µ –¥–ª—è –∑–≤–µ–∑–¥
    if body_name in ["–ú–µ—Ä–∫—É—Ä–∏–π", "–í–µ–Ω–µ—Ä–∞", "–ó–µ–º–ª—è", "–ú–∞—Ä—Å", "–Æ–ø–∏—Ç–µ—Ä", "–°–∞—Ç—É—Ä–Ω", "–£—Ä–∞–Ω", "–ù–µ–ø—Ç—É–Ω"]:
        keyboard = [[InlineKeyboardButton("üîô –ù–∞–∑–∞–¥ –∫ –ø–ª–∞–Ω–µ—Ç–∞–º", callback_data="back_planets")]]
    else:
        keyboard = [[InlineKeyboardButton("üîô –ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é", callback_data="back_main")]]

    reply_markup = InlineKeyboardMarkup(keyboard)

    await query.edit_message_text(response, parse_mode='Markdown', reply_markup=reply_markup)


async def show_comparison(query, body1: str, body2: str):
    """–ü–æ–∫–∞–∑–∞—Ç—å —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ"""
    if body1 not in CELESTIAL_BODIES or body2 not in CELESTIAL_BODIES:
        await query.edit_message_text("‚ùå –û–¥–∏–Ω –∏–∑ –æ–±—ä–µ–∫—Ç–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω.")
        return

    b1 = CELESTIAL_BODIES[body1]
    b2 = CELESTIAL_BODIES[body2]

    response = f"üìä *–°–†–ê–í–ù–ï–ù–ò–ï: {b1['emoji']} {body1} vs {b2['emoji']} {body2}*\n\n"

    # –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–∞—Å—Å—ã
    response += f"‚öñÔ∏è *–ú–∞—Å—Å–∞:*\n‚Ä¢ {body1}: {b1['mass']}\n‚Ä¢ {body2}: {b2['mass']}\n\n"

    # –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–∞–¥–∏—É—Å–∞
    response += f"üìè *–†–∞–¥–∏—É—Å:*\n‚Ä¢ {body1}: {b1['radius']}\n‚Ä¢ {body2}: {b2['radius']}\n\n"

    # –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
    if body1 == "–ó–µ–º–ª—è" and body2 == "–ú–∞—Ä—Å":
        response += """üìù **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å–∏–ª—ã —Ç—è–∂–µ—Å—Ç–∏:**
g_–ó–µ–º–ª—è = 9.81 –º/—Å¬≤
g_–ú–∞—Ä—Å = 3.71 –º/—Å¬≤
–û—Ç–Ω–æ—à–µ–Ω–∏–µ: g_–ú–∞—Ä—Å/g_–ó–µ–º–ª—è = 3.71/9.81 ‚âà 0.38

üìê **–§–æ—Ä–º—É–ª–∞ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è:** g‚ÇÅ/g‚ÇÇ = (M‚ÇÅ/M‚ÇÇ) √ó (R‚ÇÇ¬≤/R‚ÇÅ¬≤)

üéØ **–í—ã–≤–æ–¥:** –°–∏–ª–∞ —Ç—è–∂–µ—Å—Ç–∏ –Ω–∞ –ú–∞—Ä—Å–µ —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç ~38% –æ—Ç –∑–µ–º–Ω–æ–π
"""
    elif body1 == "–°–æ–ª–Ω—Ü–µ" and body2 == "–°–∏—Ä–∏—É—Å":
        response += """üìù **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å–≤–µ—Ç–∏–º–æ—Å—Ç–∏:**
L_–°–æ–ª–Ω—Ü–µ = 1 L‚òâ
L_–°–∏—Ä–∏—É—Å = 25.4 L‚òâ
–û—Ç–Ω–æ—à–µ–Ω–∏–µ: L_–°–∏—Ä–∏—É—Å/L_–°–æ–ª–Ω—Ü–µ = 25.4

üìê **–§–æ—Ä–º—É–ª–∞:** L ‚àù M¬≥¬∑‚Åµ (–¥–ª—è –≥–ª–∞–≤–Ω–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏)

üéØ **–í—ã–≤–æ–¥:** –°–∏—Ä–∏—É—Å –≤ 25.4 —Ä–∞–∑–∞ —è—Ä—á–µ –°–æ–ª–Ω—Ü–∞
"""
    elif body1 == "–Æ–ø–∏—Ç–µ—Ä" and body2 == "–°–∞—Ç—É—Ä–Ω":
        response += """üìù **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏:**
œÅ_–Æ–ø–∏—Ç–µ—Ä = 1.33 –≥/—Å–º¬≥
œÅ_–°–∞—Ç—É—Ä–Ω = 0.69 –≥/—Å–º¬≥
–û—Ç–Ω–æ—à–µ–Ω–∏–µ: œÅ_–Æ–ø–∏—Ç–µ—Ä/œÅ_–°–∞—Ç—É—Ä–Ω ‚âà 1.93

üìê **–§–æ—Ä–º—É–ª–∞:** œÅ = 3M/(4œÄR¬≥)

üéØ **–í—ã–≤–æ–¥:** –Æ–ø–∏—Ç–µ—Ä –ø–æ—á—Ç–∏ –≤ 2 —Ä–∞–∑–∞ –ø–ª–æ—Ç–Ω–µ–µ –°–∞—Ç—É—Ä–Ω–∞
"""

    keyboard = [[InlineKeyboardButton("üîô –ù–∞–∑–∞–¥ –∫ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é", callback_data="back_compare")]]
    reply_markup = InlineKeyboardMarkup(keyboard)

    await query.edit_message_text(response, parse_mode='Markdown', reply_markup=reply_markup)


async def show_task_with_solution(query, task_type: str):
    """–ü–æ–∫–∞–∑–∞—Ç—å –∑–∞–¥–∞—á—É —Å –ø–æ–ª–Ω—ã–º —Ä–µ—à–µ–Ω–∏–µ–º"""
    tasks = {
        "velocity": """
üöÄ **–ó–ê–î–ê–ß–ê: –ö–æ—Å–º–∏—á–µ—Å–∫–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ –ú–∞—Ä—Å–∞**

üìù **–£—Å–ª–æ–≤–∏–µ:**
–í—ã—á–∏—Å–ª–∏—Ç–µ –ø–µ—Ä–≤—É—é –∫–æ—Å–º–∏—á–µ—Å–∫—É—é —Å–∫–æ—Ä–æ—Å—Ç—å –¥–ª—è –ú–∞—Ä—Å–∞.

üìê **–§–æ—Ä–º—É–ª—ã:**
1. –ü–µ—Ä–≤–∞—è –∫–æ—Å–º–∏—á–µ—Å–∫–∞—è: v‚ÇÅ = ‚àö(GM/R)
2. –í—Ç–æ—Ä–∞—è –∫–æ—Å–º–∏—á–µ—Å–∫–∞—è: v‚ÇÇ = ‚àö(2GM/R)

üî¢ **–î–∞–Ω–Ω—ã–µ:**
- G = 6.67430√ó10‚Åª¬π¬π –º¬≥/(–∫–≥¬∑—Å¬≤)
- M_–ú–∞—Ä—Å = 6.4171√ó10¬≤¬≥ –∫–≥
- R_–ú–∞—Ä—Å = 3.3895√ó10‚Å∂ –º

üìù **–†–µ—à–µ–Ω–∏–µ:**
1. –ü–µ—Ä–≤–∞—è –∫–æ—Å–º–∏—á–µ—Å–∫–∞—è:
   v‚ÇÅ = ‚àö(6.67430√ó10‚Åª¬π¬π √ó 6.4171√ó10¬≤¬≥ / 3.3895√ó10‚Å∂)
   v‚ÇÅ = ‚àö(1.264√ó10‚Å∑) ‚âà 3.56√ó10¬≥ –º/—Å

2. –í—Ç–æ—Ä–∞—è –∫–æ—Å–º–∏—á–µ—Å–∫–∞—è:
   v‚ÇÇ = ‚àö(2 √ó 6.67430√ó10‚Åª¬π¬π √ó 6.4171√ó10¬≤¬≥ / 3.3895√ó10‚Å∂)
   v‚ÇÇ = ‚àö(2.528√ó10‚Å∑) ‚âà 5.03√ó10¬≥ –º/—Å

üéØ **–û—Ç–≤–µ—Ç—ã:**
- –ü–µ—Ä–≤–∞—è –∫–æ—Å–º–∏—á–µ—Å–∫–∞—è: ~3.56 –∫–º/—Å
- –í—Ç–æ—Ä–∞—è –∫–æ—Å–º–∏—á–µ—Å–∫–∞—è: ~5.03 –∫–º/—Å

‚ö° **–ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π —Ñ–∞–∫—Ç:** –ù–∞ –ú–∞—Ä—Å–µ –∑–∞–ø—É—Å–∫–∞—Ç—å —Ä–∞–∫–µ—Ç—ã –ø—Ä–æ—â–µ, —á–µ–º –Ω–∞ –ó–µ–º–ª–µ!
""",
        "mass": """
‚öñÔ∏è **–ó–ê–î–ê–ß–ê: –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–∞—Å—Å –ø–ª–∞–Ω–µ—Ç**

üìù **–£—Å–ª–æ–≤–∏–µ:**
–í–æ —Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –º–∞—Å—Å–∞ –Æ–ø–∏—Ç–µ—Ä–∞ –±–æ–ª—å—à–µ –º–∞—Å—Å—ã –°–∞—Ç—É—Ä–Ω–∞?

üìê **–§–æ—Ä–º—É–ª–∞:**
N = M‚ÇÅ/M‚ÇÇ

üî¢ **–î–∞–Ω–Ω—ã–µ:**
- M_–Æ–ø–∏—Ç–µ—Ä = 1.8982√ó10¬≤‚Å∑ –∫–≥
- M_–°–∞—Ç—É—Ä–Ω = 5.6834√ó10¬≤‚Å∂ –∫–≥

üìù **–†–µ—à–µ–Ω–∏–µ:**
N = M_–Æ–ø–∏—Ç–µ—Ä / M_–°–∞—Ç—É—Ä–Ω
N = 1.8982√ó10¬≤‚Å∑ / 5.6834√ó10¬≤‚Å∂
N = 3.339

üéØ **–û—Ç–≤–µ—Ç:** –Æ–ø–∏—Ç–µ—Ä –≤ 3.34 —Ä–∞–∑–∞ –º–∞—Å—Å–∏–≤–Ω–µ–µ –°–∞—Ç—É—Ä–Ω–∞

üìù **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–¥–∞—á–∞:**
–í–æ —Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –°–æ–ª–Ω—Ü–µ –º–∞—Å—Å–∏–≤–Ω–µ–µ –ó–µ–º–ª–∏?

üî¢ **–†–µ—à–µ–Ω–∏–µ:**
M_–°–æ–ª–Ω—Ü–µ = 1.9885√ó10¬≥‚Å∞ –∫–≥
M_–ó–µ–º–ª—è = 5.9722√ó10¬≤‚Å¥ –∫–≥
N = 1.9885√ó10¬≥‚Å∞ / 5.9722√ó10¬≤‚Å¥ = 3.33√ó10‚Åµ

üéØ **–û—Ç–≤–µ—Ç:** –°–æ–ª–Ω—Ü–µ –≤ 333 000 —Ä–∞–∑ –º–∞—Å—Å–∏–≤–Ω–µ–µ –ó–µ–º–ª–∏
""",
        "gravity": """
üåç **–ó–ê–î–ê–ß–ê: –°–∏–ª–∞ —Ç—è–∂–µ—Å—Ç–∏ –Ω–∞ –í–µ–Ω–µ—Ä–µ**

üìù **–£—Å–ª–æ–≤–∏–µ:**
–†–∞—Å—Å—á–∏—Ç–∞–π—Ç–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –ø–∞–¥–µ–Ω–∏—è –Ω–∞ –í–µ–Ω–µ—Ä–µ.

üìê **–§–æ—Ä–º—É–ª–∞:**
g = GM/R¬≤

üî¢ **–î–∞–Ω–Ω—ã–µ:**
- G = 6.67430√ó10‚Åª¬π¬π –º¬≥/(–∫–≥¬∑—Å¬≤)
- M_–í–µ–Ω–µ—Ä–∞ = 4.8675√ó10¬≤‚Å¥ –∫–≥
- R_–í–µ–Ω–µ—Ä–∞ = 6.0518√ó10‚Å∂ –º

üìù **–†–µ—à–µ–Ω–∏–µ:**
g = (6.67430√ó10‚Åª¬π¬π √ó 4.8675√ó10¬≤‚Å¥) / (6.0518√ó10‚Å∂)¬≤
g = 3.248√ó10¬π‚Å¥ / 3.663√ó10¬π¬≥
g ‚âà 8.87 –º/—Å¬≤

üéØ **–û—Ç–≤–µ—Ç:** g_–í–µ–Ω–µ—Ä–∞ ‚âà 8.87 –º/—Å¬≤

üìù **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –ó–µ–º–ª–µ–π:**
g_–ó–µ–º–ª—è = 9.81 –º/—Å¬≤
–û—Ç–Ω–æ—à–µ–Ω–∏–µ: 8.87/9.81 ‚âà 0.904

üéØ **–í—ã–≤–æ–¥:** –ù–∞ –í–µ–Ω–µ—Ä–µ —Å–∏–ª–∞ —Ç—è–∂–µ—Å—Ç–∏ ~90% –æ—Ç –∑–µ–º–Ω–æ–π

‚ö° **–ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π —Ñ–∞–∫—Ç:** –ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –±–ª–∏–∑–∫–æ–µ g, –∞—Ç–º–æ—Å—Ñ–µ—Ä–Ω–æ–µ –¥–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –í–µ–Ω–µ—Ä–µ –≤ 92 —Ä–∞–∑–∞ –±–æ–ª—å—à–µ –∑–µ–º–Ω–æ–≥–æ!
""",
        "period": """
üîÑ **–ó–ê–î–ê–ß–ê: –û—Ä–±–∏—Ç–∞–ª—å–Ω—ã–µ –ø–µ—Ä–∏–æ–¥—ã**

üìù **–£—Å–ª–æ–≤–∏–µ 1:**
–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ —Å–∏–Ω–æ–¥–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–∏–æ–¥ –í–µ–Ω–µ—Ä—ã –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ó–µ–º–ª–∏.

üìê **–§–æ—Ä–º—É–ª–∞:**
1/S = 1/T‚ÇÅ - 1/T‚ÇÇ
–≥–¥–µ S - —Å–∏–Ω–æ–¥–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–∏–æ–¥, T‚ÇÅ –∏ T‚ÇÇ - —Å–∏–¥–µ—Ä–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–∏–æ–¥—ã

üî¢ **–î–∞–Ω–Ω—ã–µ:**
- T_–ó–µ–º–ª—è = 365.25 –¥–Ω–µ–π
- T_–í–µ–Ω–µ—Ä–∞ = 224.7 –¥–Ω–µ–π

üìù **–†–µ—à–µ–Ω–∏–µ:**
1/S = 1/224.7 - 1/365.25
1/S = 0.004451 - 0.002738 = 0.001713
S = 1/0.001713 ‚âà 583.8 –¥–Ω–µ–π

üéØ **–û—Ç–≤–µ—Ç:** –°–∏–Ω–æ–¥–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–∏–æ–¥ –í–µ–Ω–µ—Ä—ã ~584 –¥–Ω—è

üìù **–£—Å–ª–æ–≤–∏–µ 2:**
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç—Ä–µ—Ç–∏–π –∑–∞–∫–æ–Ω –ö–µ–ø–ª–µ—Ä–∞ –¥–ª—è –ú–µ—Ä–∫—É—Ä–∏—è.

üìê **–§–æ—Ä–º—É–ª–∞:**
T¬≤/a¬≥ = const = 1 –¥–ª—è –ó–µ–º–ª–∏ (–≤ –≥–æ–¥–∞—Ö –∏ –∞.–µ.)

üî¢ **–î–∞–Ω–Ω—ã–µ:**
- T_–ú–µ—Ä–∫—É—Ä–∏–π = 0.241 –ª–µ—Ç (88/365.25)
- a_–ú–µ—Ä–∫—É—Ä–∏–π = 0.3871 –∞.–µ.

üìù **–†–µ—à–µ–Ω–∏–µ:**
T¬≤/a¬≥ = (0.241)¬≤ / (0.3871)¬≥
T¬≤/a¬≥ = 0.0581 / 0.0580 ‚âà 1.002

üéØ **–û—Ç–≤–µ—Ç:** –ó–∞–∫–æ–Ω –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å –≤—ã—Å–æ–∫–æ–π —Ç–æ—á–Ω–æ—Å—Ç—å—é
""",
        "stars": """
‚≠êÔ∏è **–ó–ê–î–ê–ß–ê: –ó–≤–µ–∑–¥–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏**

üìù **–£—Å–ª–æ–≤–∏–µ 1:**
–í–æ —Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –°–∏—Ä–∏—É—Å —è—Ä—á–µ –°–æ–ª–Ω—Ü–∞?

üî¢ **–î–∞–Ω–Ω—ã–µ:**
- L_–°–∏—Ä–∏—É—Å = 25.4 L‚òâ
- L_–°–æ–ª–Ω—Ü–µ = 1 L‚òâ

üìù **–†–µ—à–µ–Ω–∏–µ:**
N = L_–°–∏—Ä–∏—É—Å / L_–°–æ–ª–Ω—Ü–µ = 25.4

üéØ **–û—Ç–≤–µ—Ç:** –°–∏—Ä–∏—É—Å –≤ 25.4 —Ä–∞–∑–∞ —è—Ä—á–µ –°–æ–ª–Ω—Ü–∞

üìù **–£—Å–ª–æ–≤–∏–µ 2:**
–û—Ü–µ–Ω–∏—Ç–µ —Å–≤–µ—Ç–∏–º–æ—Å—Ç—å –∑–≤–µ–∑–¥—ã —Å –º–∞—Å—Å–æ–π 5 M‚òâ.

üìê **–§–æ—Ä–º—É–ª–∞:** L ‚àù M¬≥¬∑‚Åµ (–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –º–∞—Å—Å–∞-—Å–≤–µ—Ç–∏–º–æ—Å—Ç—å –¥–ª—è –≥–ª–∞–≤–Ω–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏)

üìù **–†–µ—à–µ–Ω–∏–µ:**
L/L‚òâ = (M/M‚òâ)¬≥¬∑‚Åµ = 5¬≥¬∑‚Åµ = 5¬≥ √ó ‚àö5 = 125 √ó 2.236 ‚âà 279

üéØ **–û—Ç–≤–µ—Ç:** –ó–≤–µ–∑–¥–∞ –º–∞—Å—Å–æ–π 5 M‚òâ –∏–º–µ–µ—Ç —Å–≤–µ—Ç–∏–º–æ—Å—Ç—å ~279 L‚òâ

üìù **–£—Å–ª–æ–≤–∏–µ 3:**
–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ —Ä–∞–¥–∏—É—Å –°–∏—Ä–∏—É—Å–∞ A –≤ –º–µ—Ç—Ä–∞—Ö.

üî¢ **–î–∞–Ω–Ω—ã–µ:**
- R_–°–∏—Ä–∏—É—Å A = 1.71 R‚òâ
- R‚òâ = 6.957√ó10‚Å∏ –º

üìù **–†–µ—à–µ–Ω–∏–µ:**
R = 1.71 √ó 6.957√ó10‚Å∏ = 1.189√ó10‚Åπ –º

üéØ **–û—Ç–≤–µ—Ç:** R_–°–∏—Ä–∏—É—Å A ‚âà 1.19√ó10‚Åπ –º
""",
        "density": """
üìè **–ó–ê–î–ê–ß–ê: –ü–ª–æ—Ç–Ω–æ—Å—Ç—å –Ω–µ–±–µ—Å–Ω—ã—Ö —Ç–µ–ª**

üìù **–£—Å–ª–æ–≤–∏–µ 1:**
–†–∞—Å—Å—á–∏—Ç–∞–π—Ç–µ —Å—Ä–µ–¥–Ω—é—é –ø–ª–æ—Ç–Ω–æ—Å—Ç—å –ó–µ–º–ª–∏.

üìê **–§–æ—Ä–º—É–ª–∞:**
œÅ = M/V = 3M/(4œÄR¬≥)

üî¢ **–î–∞–Ω–Ω—ã–µ:**
- M_–ó–µ–º–ª—è = 5.9722√ó10¬≤‚Å¥ –∫–≥
- R_–ó–µ–º–ª—è = 6.371√ó10‚Å∂ –º

üìù **–†–µ—à–µ–Ω–∏–µ:**
V = (4/3)œÄR¬≥ = (4/3)œÄ √ó (6.371√ó10‚Å∂)¬≥ ‚âà 1.083√ó10¬≤¬π –º¬≥
œÅ = 5.9722√ó10¬≤‚Å¥ / 1.083√ó10¬≤¬π ‚âà 5515 –∫–≥/–º¬≥

üéØ **–û—Ç–≤–µ—Ç:** œÅ_–ó–µ–º–ª—è ‚âà 5.52 –≥/—Å–º¬≥

üìù **–£—Å–ª–æ–≤–∏–µ 2:**
–°—Ä–∞–≤–Ω–∏—Ç–µ –ø–ª–æ—Ç–Ω–æ—Å—Ç—å –°–∞—Ç—É—Ä–Ω–∞ —Å –ø–ª–æ—Ç–Ω–æ—Å—Ç—å—é –≤–æ–¥—ã.

üî¢ **–î–∞–Ω–Ω—ã–µ:**
- œÅ_–°–∞—Ç—É—Ä–Ω = 687 –∫–≥/–º¬≥
- œÅ_–≤–æ–¥–∞ = 1000 –∫–≥/–º¬≥

üìù **–†–µ—à–µ–Ω–∏–µ:**
–û—Ç–Ω–æ—à–µ–Ω–∏–µ: 687/1000 = 0.687

üéØ **–û—Ç–≤–µ—Ç:** –°–∞—Ç—É—Ä–Ω –º–µ–Ω–µ–µ –ø–ª–æ—Ç–Ω—ã–π, —á–µ–º –≤–æ–¥–∞ (~69% –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏ –≤–æ–¥—ã)

üìù **–£—Å–ª–æ–≤–∏–µ 3:**
–û—Ü–µ–Ω–∏—Ç–µ –ø–ª–æ—Ç–Ω–æ—Å—Ç—å –Ω–µ–π—Ç—Ä–æ–Ω–Ω–æ–π –∑–≤–µ–∑–¥—ã (—Ä–∞–¥–∏—É—Å 10 –∫–º, –º–∞—Å—Å–∞ 1.4 M‚òâ).

üî¢ **–î–∞–Ω–Ω—ã–µ:**
- M = 1.4 √ó 1.989√ó10¬≥‚Å∞ = 2.785√ó10¬≥‚Å∞ –∫–≥
- R = 1.0√ó10‚Å¥ –º

üìù **–†–µ—à–µ–Ω–∏–µ:**
œÅ = 3M/(4œÄR¬≥) = 3√ó2.785√ó10¬≥‚Å∞/(4œÄ√ó(1.0√ó10‚Å¥)¬≥)
œÅ ‚âà 6.65√ó10¬π‚Å∑ –∫–≥/–º¬≥

üéØ **–û—Ç–≤–µ—Ç:** œÅ ‚âà 6.7√ó10¬π‚Å∑ –∫–≥/–º¬≥ (–≤ –º–∏–ª–ª–∏–æ–Ω—ã —Ä–∞–∑ –ø–ª–æ—Ç–Ω–µ–µ –æ–±—ã—á–Ω–æ–≥–æ –≤–µ—â–µ—Å—Ç–≤–∞!)
"""
    }

    if task_type in tasks:
        response = tasks[task_type]
        response += "\n\nüîç *–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –±–æ—Ç–∞ –¥–ª—è —Ä–µ—à–µ–Ω–∏—è —Å–≤–æ–∏—Ö –∑–∞–¥–∞—á!*"
    else:
        response = "üìù –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –∑–∞–¥–∞—á–∏ –∏–∑ —Å–ø–∏—Å–∫–∞ –≤—ã—à–µ"

    keyboard = [
        [InlineKeyboardButton("üîÑ –ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞", callback_data=f"task_{task_type}"),
         InlineKeyboardButton("üîô –ù–∞–∑–∞–¥ –∫ –∑–∞–¥–∞—á–∞–º", callback_data="back_tasks")]
    ]
    reply_markup = InlineKeyboardMarkup(keyboard)

    await query.edit_message_text(response, parse_mode='Markdown', reply_markup=reply_markup)


async def show_methods(update: Update):
    """–ü–æ–∫–∞–∑–∞—Ç—å –º–µ—Ç–æ–¥—ã –∏–∑–º–µ—Ä–µ–Ω–∏–π"""
    methods = """
üî¨ *–ú–ï–¢–û–î–´ –ê–°–¢–†–û–ù–û–ú–ò–ß–ï–°–ö–ò–• –ò–ó–ú–ï–†–ï–ù–ò–ô*

*üì° –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–∞—Å—Å—ã:*
‚Ä¢ –ü–ª–∞–Ω–µ—Ç—ã: –ø–æ –¥–≤–∏–∂–µ–Ω–∏—é —Å–ø—É—Ç–Ω–∏–∫–æ–≤ (—Ñ–æ—Ä–º—É–ª–∞: M = 4œÄ¬≤a¬≥/(GT¬≤))
‚Ä¢ –ó–≤–µ–∑–¥—ã –≤ –¥–≤–æ–π–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö: —Ç—Ä–µ—Ç–∏–π –∑–∞–∫–æ–Ω –ö–µ–ø–ª–µ—Ä–∞
‚Ä¢ –û–¥–∏–Ω–æ—á–Ω—ã–µ –∑–≤–µ–∑–¥—ã: —ç–≤–æ–ª—é—Ü–∏–æ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏ + —Å–ø–µ–∫—Ç—Ä–∞–ª—å–Ω—ã–π –∫–ª–∞—Å—Å

*üìè –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–∞–¥–∏—É—Å–∞:*
‚Ä¢ –†–∞–¥–∏–æ–ª–æ–∫–∞—Ü–∏—è (–ø–ª–∞–Ω–µ—Ç—ã): œÑ = 2R/c
‚Ä¢ –ò–Ω—Ç–µ—Ä—Ñ–µ—Ä–æ–º–µ—Ç—Ä–∏—è (–∑–≤–µ–∑–¥—ã): Œ∏ = 1.22Œª/D
‚Ä¢ –ó–∞—Ç–º–µ–Ω–Ω—ã–µ –¥–≤–æ–π–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã: –ø–æ –∫—Ä–∏–≤–æ–π –±–ª–µ—Å–∫–∞
‚Ä¢ –£–≥–ª–æ–≤–æ–π –¥–∏–∞–º–µ—Ç—Ä + –ø–∞—Ä–∞–ª–ª–∞–∫—Å: R = Œ∏¬∑d/2

*‚òÄÔ∏è –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–≤–µ—Ç–∏–º–æ—Å—Ç–∏:*
‚Ä¢ –§–æ—Ç–æ–º–µ—Ç—Ä–∏—è + –ø–∞—Ä–∞–ª–ª–∞–∫—Å: L = 4œÄd¬≤F
‚Ä¢ –ë–æ–ª–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ—Ä–µ–Ω–∏—è: –∏–Ω—Ç–µ–≥—Ä–∞–ª –ø–æ –≤—Å–µ–º—É —Å–ø–µ–∫—Ç—Ä—É
‚Ä¢ –ú–æ–¥–µ–ª–∏ –∞—Ç–º–æ—Å—Ñ–µ—Ä –∑–≤–µ–∑–¥: –∑–∞–∫–æ–Ω –°—Ç–µ—Ñ–∞–Ω–∞-–ë–æ–ª—å—Ü–º–∞–Ω–∞ L = 4œÄR¬≤œÉT‚Å¥

*üìç –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è:*
‚Ä¢ –¢—Ä–∏–≥–æ–Ω–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–π –ø–∞—Ä–∞–ª–ª–∞–∫—Å: d = 1/p (–ø–∫)
‚Ä¢ –°–ø–µ–∫—Ç—Ä–æ—Å–∫–æ–ø–∏—á–µ—Å–∫–∏–π –ø–∞—Ä–∞–ª–ª–∞–∫—Å: –ø–æ —Å–ø–µ–∫—Ç—Ä—É –∏ —Å–≤–µ—Ç–∏–º–æ—Å—Ç–∏
‚Ä¢ –¶–µ—Ñ–µ–∏–¥—ã: –ø–µ—Ä–∏–æ–¥-—Å–≤–µ—Ç–∏–º–æ—Å—Ç—å P-L relation
‚Ä¢ –ö—Ä–∞—Å–Ω–æ–µ —Å–º–µ—â–µ–Ω–∏–µ: –∑–∞–∫–æ–Ω –•–∞–±–±–ª–∞ v = H‚ÇÄd

*üéØ –¢–æ—á–Ω–æ—Å—Ç—å –≤ –æ–ª–∏–º–ø–∏–∞–¥–∞—Ö:*
1. –í—Å–µ–≥–¥–∞ —É–∫–∞–∑—ã–≤–∞–π—Ç–µ –ø–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å!
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∏—Å—Ç–µ–º—É –°–ò
3. –°—Ä–∞–≤–Ω–∏–≤–∞–π—Ç–µ —Ä–∞–∑–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏
4. –£—á–∏—Ç—ã–≤–∞–π—Ç–µ –º–µ—Ç–æ–¥ –∏–∑–º–µ—Ä–µ–Ω–∏—è
"""
    await update.message.reply_text(methods, parse_mode='Markdown', reply_markup=get_main_keyboard())


async def show_help(update: Update):
    """–ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–º–æ—â—å"""
    help_text = """
‚ùì *–ü–û–ú–û–©–¨ –ü–û –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ ASTROBOT*

*–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:*
‚Ä¢ ü™ê **8 –ü–ª–∞–Ω–µ—Ç** - –ø–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–ª–∞–Ω–µ—Ç–∞—Ö –°–æ–ª–Ω–µ—á–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã
‚Ä¢ ‚≠êÔ∏è **–°–∏—Ä–∏—É—Å** - –ø–æ–¥—Ä–æ–±–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ —Å–∞–º–æ–π —è—Ä–∫–æ–π –∑–≤–µ–∑–¥–µ
‚Ä¢ ‚òÄÔ∏è **–°–æ–ª–Ω—Ü–µ** - –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–∞—à–µ–π –∑–≤–µ–∑–¥—ã
‚Ä¢ üìä **–°—Ä–∞–≤–Ω–∏—Ç—å** - —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–≤—É—Ö –Ω–µ–±–µ—Å–Ω—ã—Ö —Ç–µ–ª
‚Ä¢ üìù **–ó–∞–¥–∞—á–∏** - –æ–ª–∏–º–ø–∏–∞–¥–Ω—ã–µ –∑–∞–¥–∞—á–∏ —Å –ø–æ–ª–Ω—ã–º–∏ —Ä–µ—à–µ–Ω–∏—è–º–∏
‚Ä¢ üî¨ **–ú–µ—Ç–æ–¥—ã** - –º–µ—Ç–æ–¥–∏–∫–∏ –∞—Å—Ç—Ä–æ–Ω–æ–º–∏—á–µ—Å–∫–∏—Ö –∏–∑–º–µ—Ä–µ–Ω–∏–π

*üéØ –î–ª—è –æ–ª–∏–º–ø–∏–∞–¥:*
‚Ä¢ –í—Å–µ –∑–∞–¥–∞—á–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç –ø–æ–ª–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ
‚Ä¢ –£–∫–∞–∑–∞–Ω—ã –≤—Å–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ–æ—Ä–º—É–ª—ã
‚Ä¢ –î–∞–Ω—ã —á–∏—Å–ª–µ–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∫–æ–Ω—Å—Ç–∞–Ω—Ç
‚Ä¢ –ü—Ä–∏–≤–µ–¥–µ–Ω—ã –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Ä–∞—Å—á–µ—Ç—ã

*üìö –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è —Ä–∞—Å—á–µ—Ç–æ–≤:*
‚Ä¢ G = 6.67430√ó10‚Åª¬π¬π –º¬≥/(–∫–≥¬∑—Å¬≤) (–≥—Ä–∞–≤–∏—Ç–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–æ—Å—Ç–æ—è–Ω–Ω–∞—è)
‚Ä¢ œÉ = 5.670374√ó10‚Åª‚Å∏ –í—Ç/(–º¬≤¬∑–ö‚Å¥) (–ø–æ—Å—Ç–æ—è–Ω–Ω–∞—è –°—Ç–µ—Ñ–∞–Ω–∞-–ë–æ–ª—å—Ü–º–∞–Ω–∞)
‚Ä¢ 1 –∞.–µ. = 149 597 870 700 –º (–∞—Å—Ç—Ä–æ–Ω–æ–º–∏—á–µ—Å–∫–∞—è –µ–¥–∏–Ω–∏—Ü–∞)
‚Ä¢ 1 –ø–∫ = 3.085677581√ó10¬π‚Å∂ –º = 3.261563776 —Å–≤. –ª–µ—Ç (–ø–∞—Ä—Å–µ–∫)
‚Ä¢ M‚òâ = 1.9885√ó10¬≥‚Å∞ –∫–≥ (–º–∞—Å—Å–∞ –°–æ–ª–Ω—Ü–∞)
‚Ä¢ R‚òâ = 6.957√ó10‚Å∏ –º (—Ä–∞–¥–∏—É—Å –°–æ–ª–Ω—Ü–∞)
‚Ä¢ L‚òâ = 3.828√ó10¬≤‚Å∂ –í—Ç (—Å–≤–µ—Ç–∏–º–æ—Å—Ç—å –°–æ–ª–Ω—Ü–∞)

*‚úÖ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:*
‚Ä¢ –ö –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–µ –ø—Ä–∏–ª–∞–≥–∞–µ—Ç—Å—è —Ä–µ—à–µ–Ω–∏–µ
‚Ä¢ –ü–æ–∫–∞–∑–∞–Ω—ã –≤—Å–µ —à–∞–≥–∏ —Ä–∞—Å—á–µ—Ç–∞
‚Ä¢ –î–∞–Ω—ã –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ —Ñ–∞–∫—Ç—ã
‚Ä¢ –§–æ—Ä–º—É–ª—ã —É–∫–∞–∑–∞–Ω—ã –≤ —Ä–µ—à–µ–Ω–∏—è—Ö –∑–∞–¥–∞—á
"""
    await update.message.reply_text(help_text, parse_mode='Markdown', reply_markup=get_main_keyboard())


# ==================== –ó–ê–ü–£–°–ö –ë–û–¢–ê ====================

def main():
    """–ó–∞–ø—É—Å–∫ –±–æ—Ç–∞"""
    print("=" * 60)
    print("üöÄ AstroBot: –ü–æ–ª–Ω—ã–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø–æ –∞—Å—Ç—Ä–æ–Ω–æ–º–∏–∏ —Å —Ä–µ—à–µ–Ω–∏—è–º–∏")
    print("=" * 60)
    print("‚úÖ –ö –í–°–ï–ú –∑–∞–¥–∞—á–∞–º –¥–æ–±–∞–≤–ª–µ–Ω—ã —Ä–µ—à–µ–Ω–∏—è –∏ —Ñ–æ—Ä–º—É–ª—ã")
    print("‚úÖ –£–¥–∞–ª–µ–Ω–∞ –¥—É–±–ª–∏—Ä—É—é—â–∞—è —Å—Ç—Ä–æ–∫–∞ '–§–æ—Ä–º—É–ª–∞:' –≤ –∫–æ–Ω—Ü–µ")
    print("‚úÖ –§–æ—Ä–º—É–ª—ã –æ—Å—Ç–∞–ª–∏—Å—å —Ç–æ–ª—å–∫–æ –≤ —Ä–µ—à–µ–Ω–∏—è—Ö –∑–∞–¥–∞—á")
    print("‚úÖ –ö–Ω–æ–ø–∫–∞ '–ù–∞–∑–∞–¥ –∫ –ø–ª–∞–Ω–µ—Ç–∞–º' —Ä–∞–±–æ—Ç–∞–µ—Ç")
    print("=" * 60)
    print("‚ö†Ô∏è  –í–ê–ñ–ù–û: –ó–∞–º–µ–Ω–∏—Ç–µ TOKEN –Ω–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω!")
    print("=" * 60)

    try:
        # –°–æ–∑–¥–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
        application = Application.builder().token(TOKEN).build()
        await application.updater.start_polling(allowed_updates=Update.ALL_TYPES, drop_pending_updates=True)

        # –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
        application.add_handler(CommandHandler("start", start_command))
        application.add_handler(CallbackQueryHandler(button_callback))
        application.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, handle_message))

        print("–ë–æ—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è...")
        print("1. –ó–∞–º–µ–Ω–∏—Ç–µ TOKEN –≤ —Å—Ç—Ä–æ–∫–µ 24")
        print("2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–¥ –≤ PyCharm (–∑–µ–ª–µ–Ω–∞—è –∫–Ω–æ–ø–∫–∞ ‚ñ∂Ô∏è)")
        print("3. –ù–∞–π–¥–∏—Ç–µ –±–æ—Ç–∞ –≤ Telegram")
        print("4. –ù–∞–ø–∏—à–∏—Ç–µ /start")
        print("5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–Ω–æ–ø–∫—É '8 –ü–ª–∞–Ω–µ—Ç' - –Ω–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–æ—Ä–º—É–ª—ã!")
        print("=" * 60)

        # –ó–∞–ø—É—Å–∫–∞–µ–º
        application.run_polling(allowed_updates=Update.ALL_TYPES)

    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞: {e}")
        print("=" * 60)


if __name__ == '__main__':
    main()






